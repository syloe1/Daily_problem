题意理解

有一排 n 个木板。

要用恰好两种颜色来涂，并且每种颜色形成连续的区间。
👉 也就是说，整排木板就是被分成两个连续的段，左段用一种颜色，右段用另一种颜色。

Monocarp 有 m 种颜色，第 i 种颜色最多可以涂 a[i] 块板。不能超量使用。

问：有多少种不同的涂色方法？

两种涂法不同的判定标准：存在至少一个木板颜色不同。

🔹关键观察

分割位置
木板有 n-1 个可能的分割点，左边长度 L（1 ≤ L ≤ n-1），右边长度 R = n-L。

颜色选择

选择两个不同的颜色 (i,j)，其中一种涂左边，另一种涂右边。

需要满足：

a[i] >= L 且 a[j] >= R （i 涂左，j 涂右）

或者 a[i] >= R 且 a[j] >= L （i 涂右，j 涂左）

每个有效组合是一种不同的涂法。

问题转化
对于每个分割点 L，我们要统计：

有多少个 i 颜色能涂 L；

有多少个 j 颜色能涂 R。
最后组合，但注意不能让 i == j。

🔹高效做法

我们要快速判断某个颜色是否能涂长度 ≥ x。

建一个前缀计数数组，记录至少能涂长度 x 的颜色数。

预处理

给出数组 a[1..m]。

建一个 freq 数组：
cnt[k] = 颜色数目，能涂至少 k 块板

这样我们可以在 O(1) 时间得到：能涂长度 ≥ L 的颜色数。

🔹统计方法

对于每个分割点 L (1 ≤ L ≤ n-1)：

设 R = n - L。

设：

cntL = #颜色 i，a[i] >= L

cntR = #颜色 j，a[j] >= R

cntBoth = #颜色 c，a[c] >= max(L, R) （即能同时涂 L 和 R 的颜色数）

那么合法方案数为：

cntL * cntR - cntBoth


解释：

cntL * cntR 统计了所有 (i,j) 对，其中 i 可涂 L，j 可涂 R。

但其中包含了 i==j 的情况（当某颜色能涂 L 也能涂 R），这种情况不合法，所以减去 cntBoth。

🔹总答案

把所有分割点的结果加起来即可。